<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - OfficeCraft</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <div th:replace="~{fragments/navigation :: user-menu-styles}"></div>
    <style>
        .pagination {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-top: 20px;
        }

        .page-link {
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid #dee2e6;
            text-decoration: none;
            color: #0d6efd;
        }

        .page-link.active {
            background-color: #0d6efd;
            color: white;
            pointer-events: none;
        }

        .page-dots {
            padding: 6px 10px;
            color: #6c757d;
        }

        .blog-search-form {
            margin-bottom: 32px;
        }

        .blog-search-row {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .blog-search-row input {
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            min-width: 220px;
        }

        .btn-search {
            padding: 10px 16px;
            border-radius: 8px;
            border: none;
            background: #111;
            color: #fff;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div th:replace="~{fragments/navigation :: navigation}"></div>


<section class="blog-hero">
    <div class="container">
        <div class="blog-hero-content">
            <span class="blog-badge">üìö Blog & Insights</span>
            <h1>Ki·∫øn Th·ª©c & C·∫£m H·ª©ng</h1>
            <p>Kh√°m ph√° xu h∆∞·ªõng thi·∫øt k·∫ø vƒÉn ph√≤ng, b√≠ quy·∫øt t·ªëi ∆∞u kh√¥ng gian l√†m vi·ªác v√† nh·ªØng c√¢u chuy·ªán truy·ªÅn c·∫£m h·ª©ng</p>
        </div>
    </div>
</section>


<section class="blog-section">
    <div class="container">
        <!-- ===================== T√åM KI·∫æM BLOG ===================== -->
        <form class="blog-search-form"
              th:action="@{/blog}"
              method="get">

            <div class="blog-search-row">

                <!-- T√¨m theo ti√™u ƒë·ªÅ -->
                <input type="text"
                       name="title"
                       placeholder="T√¨m theo ti√™u ƒë·ªÅ..."
                       th:value="${title}" />

                <!-- L·ªçc theo ng√†y ƒëƒÉng -->
                <input type="date"
                       name="postingDate"
                       th:value="${postingDate}" />

                <!-- Gi·ªØ size khi search -->
                <input type="hidden"
                       name="size"
                       th:value="${blogPage.size}" />

                <button type="submit" class="btn-search">
                    üîç T√¨m ki·∫øm
                </button>
            </div>
        </form>

        <div class="blog-grid" th:if="${!#lists.isEmpty(blogs)}">
            <article th:each="blog : ${blogs}" class="blog-card">
                <div class="blog-card-content">
                    <div class="blog-meta">
                        <span class="blog-category">üìñ B√†i vi·∫øt</span>
                        <span class="blog-date-small" th:text="${#dates.format(blog.postingDate, 'dd/MM/yyyy')}">01/01/2024</span>
                    </div>
                    <h2 class="blog-card-title" th:text="${blog.blogTitle}">Ti√™u ƒë·ªÅ b√†i vi·∫øt</h2>
                    <p class="blog-card-excerpt" th:utext="${#strings.abbreviate(blog.content, 120)}">N·ªôi dung t√≥m t·∫Øt...</p>
                    <a th:href="@{/blog/{id}(id=${blog.blogId})}" class="blog-read-more">
                        <span>Xem th√™m b√†i vi·∫øt</span>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </div>
            </article>
        </div>
        
        
        <div th:if="${#lists.isEmpty(blogs)}" class="blog-empty-state">
            <div class="empty-icon">üìù</div>
            <h3>Ch∆∞a c√≥ b√†i vi·∫øt n√†o</h3>
            <p>H√£y quay l·∫°i sau ƒë·ªÉ kh√°m ph√° nh·ªØng n·ªôi dung th√∫ v·ªã t·ª´ OfficeCraft</p>
            <a th:href="@{/}" class="btn-primary">V·ªÅ trang ch·ªß</a>
        </div>

        <!-- ===================== PH√ÇN TRANG ===================== -->
        <div class="pagination" th:if="${totalPages > 1}">

            <!-- ¬´ -->
            <a class="page-link"
               th:if="${currentPage > 1}"
               th:href="@{/blog(
                    page=${currentPage - 2},
                    size=${blogPage.size},
                    title=${title},
                    postingDate=${postingDate}
               )}">
                &laquo;
            </a>

            <!-- Trang 1 -->
            <a class="page-link"
               th:classappend="${currentPage == 1} ? 'active'"
               th:href="@{/blog(
                    page=0,
                    size=${blogPage.size},
                    title=${title},
                    postingDate=${postingDate}
               )}">
                1
            </a>

            <!-- ... tr√°i -->
            <span class="page-dots"
                  th:if="${currentPage > 3}">
                ...
            </span>

            <!-- C√°c trang quanh currentPage -->
            <span th:each="i : ${#numbers.sequence(currentPage - 1, currentPage + 1)}">
                <a class="page-link"
                   th:if="${i > 1 and i < totalPages}"
                   th:classappend="${currentPage == i} ? 'active'"
                   th:href="@{/blog(
                        page=${i - 1},
                        size=${blogPage.size},
                        title=${title},
                        postingDate=${postingDate}
                   )}"
                   th:text="${i}">
                </a>
            </span>

            <!-- ... ph·∫£i -->
            <span class="page-dots"
                  th:if="${currentPage < totalPages - 2}">
                ...
            </span>

            <!-- Trang cu·ªëi -->
            <a class="page-link"
               th:classappend="${currentPage == totalPages} ? 'active'"
               th:href="@{/blog(
                    page=${totalPages - 1},
                    size=${blogPage.size},
                    title=${title},
                    postingDate=${postingDate}
               )}"
               th:text="${totalPages}">
            </a>

            <!-- ¬ª -->
            <a class="page-link"
               th:if="${currentPage < totalPages}"
               th:href="@{/blog(
                    page=${currentPage},
                    size=${blogPage.size},
                    title=${title},
                    postingDate=${postingDate}
               )}">
                &raquo;
            </a>
        </div>

        <div th:if="${#lists.isEmpty(blogs)}" class="blog-empty-state">
            <div class="empty-icon">üìù</div>
            <h3>Ch∆∞a c√≥ b√†i vi·∫øt n√†o</h3>
            <p>H√£y quay l·∫°i sau ƒë·ªÉ kh√°m ph√° nh·ªØng n·ªôi dung th√∫ v·ªã t·ª´ OfficeCraft</p>
            <a th:href="@{/}" class="btn-primary">V·ªÅ trang ch·ªß</a>
        </div>
    </div>
</section>

<footer>
    <div class="container">
        <p>&copy; 2026 OfficeCraft. All rights reserved.</p>
    </div>
</footer>

<div th:replace="~{fragments/navigation :: user-menu-scripts}"></div>
</body>
</html>

